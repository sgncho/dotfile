---
- block:
    - name: Remove previous ripgrep data
      file:
        path: "{{ data_home }}/ripgrep"
        state: absent
    - name: Create ripgrep directory
      file:
        path: "{{ data_home }}/ripgrep"
        state: directory
    - name: Install ripgrep via tarball
      unarchive:
        src: "https://github.com/BurntSushi/ripgrep/releases/download/{{ ripgrep_version }}/ripgrep-{{ ripgrep_version }}-x86_64-unknown-linux-musl.tar.gz"
        dest: "{{ data_home }}/ripgrep"
        remote_src: yes
        extra_opts:
          - --strip-components=1
    - name: Create symlink for ripgrep
      file:
        src: "{{ data_home }}/ripgrep/rg"
        dest: "{{ binary_home }}/rg"
        state: link
        force: yes
